#!/usr/bin/env bash
#MISE description="Full pattern scan all projects (ignores cache)"
set -euo pipefail

echo "━━━ Full Pattern Scan ━━━"
echo "⚠️  This can take a long time - not recommended for CI"
FAILED=0
echo ""
echo "→ MCP Catalog"
(cd metorial && drift scan --force) || FAILED=1
echo ""
echo "→ Platform"
(cd metorial-platform && drift scan --force) || FAILED=1
echo ""
echo "→ Index Registry"
(cd metorial-index && drift scan --force) || FAILED=1
echo ""
if [ $FAILED -eq 0 ]; then
    echo "✓ Full scan complete for all projects"
else
    echo "✗ Some scans failed"
fi
exit $FAILED
